(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-482850e0"],{2125:function(t,e,i){},"30f6":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"container"},[i("h1",{staticClass:"border-bottom m-4"},[t._v("Admin Section")]),i("div",{staticClass:"row"},[i("div",{staticClass:"col-1"}),i("div",{staticClass:"col-6"},t._l(t.items,(function(e){return i("div",{key:e.itemId,staticClass:"m-4"},[i("singleItem",{attrs:{item:e,type:t.$route.params.type}})],1)})),0),i("div",{staticClass:"col-1"}),i("div",{staticClass:"col-4"},[i("Notif")],1)])])},s=[],n=(i("96cf"),i("1da1")),o=i("75be"),c=i("56d7"),r=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.setAttribute(t.item.Total)},[i("div",{staticClass:"body"},[i("h5",{staticClass:"card-title"},[t._v(t._s(t.item.Name))]),t.show?i("div",[i("p",{staticClass:"card-text"},[t._v("Number of items:- "+t._s(t.item.Total))]),i("a",{class:t.setButtonAttribute(t.item.Total),staticStyle:{color:"white"},on:{click:function(e){t.show=!1}}},[t._v(" Edit ")])]):i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"form-control",attrs:{placeholder:t.setValue()},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}}),i("button",{class:t.setButtonAttribute(t.item.Total),staticStyle:{color:"white"},on:{click:function(e){return t.insideClickHandler()}}},[t._v(" Save ")]),i("p",{staticClass:"text-muted"},[t._v(" This will notify other admins that the change is made. ")])])])])},l=[],u=(i("99af"),{props:["item"],data:function(){return{value:"",absolute:!0,show:!0}},created:function(){console.log("Came Here")},methods:{setValue:function(){return parseInt(this.$props.item.Total)},insideClickHandler:function(){console.log(this.$props.item.id),this.value&&(c["db"].ref("data/".concat(this.$route.params.type,"/").concat(this.$props.item.itemId)).set({Name:this.$props.item.Name,Quantity:this.value}),console.log(this.$store.state.user),c["db"].ref("notification").push({Name:this.$store.state.user.displayName,Email:this.$store.state.user.email,Body:"".concat(this.$store.state.user.displayName," changed ").concat(this.$props.item.Name,"'s quantity from ").concat(this.$props.item.Total," to ").concat(this.value,"."),Type:"change"})),console.log("saved"),this.show=!0,this.$router.push({name:"JC"})},setButtonAttribute:function(t){return t>=0&&t<=4?"btn btn-danger":t>4&&t<=9?"btn btn-primary":t>9?"btn btn-success":void 0},setAttribute:function(t){return t>=0&&t<=4?"danger":t>4&&t<=9?"primary":t>9?"success":void 0}}}),d=u,m=(i("9713"),i("2877")),h=Object(m["a"])(d,r,l,!1,null,"37fb5e56",null),f=h.exports,v={components:{singleItem:f,Notif:o["a"]},data:function(){return{itemId:null,name:null,damaged:0,total:0,working:0,items:[],factor:1}},mounted:function(){this.getItems(),this.check()},created:function(){this.check()},methods:{check:function(){this.$store.state.admin||this.$router.push({name:"Home"}).catch((function(){}))},getItems:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=c["db"].ref("data/".concat(t.$route.params.type)),a=[],i.on("value",(function(t){for(var e in t.val()){console.log(e);var i=t.val()[e].Name,s=t.val()[e].Quantity,n=e;a.push({itemId:n,Name:i,Total:s})}})),t.items=a;case 4:case"end":return e.stop()}}),e)})))()}}},p=v,b=Object(m["a"])(p,a,s,!1,null,"380b08cc",null);e["default"]=b.exports},"75be":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("h1",{staticClass:"border-bottom"},[t._v("Notifications")]),t._l(t.notifications,(function(t){return i("div",{key:t.id},[i("Single",{attrs:{notification:t}})],1)})),t.showall?i("v-btn",{on:{click:function(e){return t.showAll()}}},[t._v("Show All")]):t._e(),t.showless?i("v-btn",{on:{click:function(e){return t.showLess()}}},[t._v("Show Less")]):t._e()],2)},s=[],n=(i("fb6a"),i("96cf"),i("1da1")),o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:t.getCardStyle(t.notification.type),staticStyle:{width:"100%"}},["issue"==t.notification.type?i("div",[i("div",{staticClass:"card-header"},[t._v(t._s(t.getCardHeader(t.notification.type)))]),i("div",{staticClass:"card-body"},[i("p",{staticClass:"card-text"},[t._v(t._s(t.notification.body))]),i("v-btn",{on:{click:function(e){return t.agreedClickHandler(t.notification.email)}}},[t._v("Approve")]),i("v-btn",{on:{click:function(e){return t.rejectedClickHandler(t.notification.email)}}},[t._v("Reject")])],1),i("div",{staticClass:"card-footer"},[t._v(t._s(t.notification.name))])]):i("div",[i("div",{staticClass:"card-header"},[t._v(t._s(t.getCardHeader(t.notification.type)))]),i("div",{staticClass:"card-body"},[i("p",{staticClass:"card-text"},[t._v(t._s(t.notification.body))])]),i("div",{staticClass:"card-footer"},[t._v(t._s(t.notification.name))])])])},c=[],r=i("56d7"),l={props:["notification"],methods:{getCardStyle:function(t){return"issue"==t?"card text-white bg-secondary mb-3":"stock"==t?"card text-white bg-danger mb-3":"change"==t?"card text-white bg-primary mb-3":"info-agreed"==t?"card text-white bg-success mb-3":"info-rejected"==t?"card text-white bg-danger mb-3":void 0},getCardHeader:function(t){return"Notification for :- ".concat(t.charAt(0).toUpperCase()+t.slice(1))},agreedClickHandler:function(t){r["db"].ref("notification").push({Name:this.$store.state.user.displayName,Email:this.$store.state.user.email,Body:"".concat(this.$store.state.user.displayName," has agreed to the booking."),Type:"info-agreed"}),window.Email.send({SecureToken:"516b8123-d120-42df-9bc2-de17edd0f342",To:t,From:"abc@example.com",Subject:"You can issue your item, your request was accepted",Body:"<html><h2>Header</h2></html>"}),this.$router.push({name:"JC"})},rejectedClickHandler:function(t){r["db"].ref("notification").push({Name:this.$store.state.user.displayName,Email:this.$store.state.user.email,Body:"".concat(this.$store.state.user.displayName," has rejected to the booking."),Type:"info-rejected"}),window.Email.send({SecureToken:"516b8123-d120-42df-9bc2-de17edd0f342",To:t,From:"abc@example.com",Subject:"Sorry, You can't issue your item right now.",Body:"<html><h2>Request rejected</h2></html>"}),this.$router.push({name:"JC"})}}},u=l,d=i("2877"),m=i("6544"),h=i.n(m),f=i("8336"),v=Object(d["a"])(u,o,c,!1,null,null,null),p=v.exports;h()(v,{VBtn:f["a"]});var b={components:{Single:p},data:function(){return{notifications:[],newNotifications:[],allNotifications:[],showless:!1,showall:!0}},created:function(){this.getItems()},mounted:function(){this.getItems()},methods:{showAll:function(){this.notifications=this.allNotifications,this.showless=!0,this.showall=!1},showLess:function(){this.notifications=this.newNotifications,this.showall=!0,this.showless=!1},getItems:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var i,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,r["db"].ref("notification");case 2:i=e.sent,a=[],i.on("value",(function(t){for(var e in t.val())a.push({id:e,body:t.val()[e].Body,email:t.val()[e].Email,name:t.val()[e].Name,type:t.val()[e].Type})})),console.log(a),t.newNotifications=a.slice(-5).slice(0,5).reverse(),t.allNotifications=a.reverse(),t.notifications=t.newNotifications;case 9:case"end":return e.stop()}}),e)})))()}}},w=b,g=Object(d["a"])(w,a,s,!1,null,null,null);e["a"]=g.exports;h()(g,{VBtn:f["a"]})},9713:function(t,e,i){"use strict";var a=i("2125"),s=i.n(a);s.a}}]);
//# sourceMappingURL=chunk-482850e0.5bf56dd2.js.map